<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Incentive Calculator for FLS (ABCL RSB)</title>

<style>
:root {
    --primary-red: #c00000;
    --light-red: #ffe6e6;
    --green: #1e7e34;
    --orange: #ff8c00;
    --gray-bg: #f5f5f5;
}

body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: var(--gray-bg);
}

.container {
    max-width: 900px;
    margin: 40px auto;
    padding: 20px;
}

.card {
    background: white;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    padding: 25px;
    margin-bottom: 25px;
}

h1 {
    text-align: center;
    color: var(--primary-red);
}

h2 {
    color: var(--primary-red);
}

input {
    width: 100%;
    padding: 10px;
    margin-top: 6px;
    margin-bottom: 15px;
    border-radius: 6px;
    border: 1px solid #ccc;
    font-size: 14px;
}

input:focus {
    border-color: var(--primary-red);
    outline: none;
}

.row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
}

.error {
    color: red;
    font-size: 14px;
    margin-bottom: 10px;
}

.success-red { color: red; font-weight: bold; }
.success-orange { color: var(--orange); font-weight: bold; }
.success-green { color: var(--green); font-weight: bold; }

.result-item {
    margin-bottom: 12px;
    font-size: 17px;
}

.total {
    font-size: 22px;
    font-weight: bold;
    background: var(--light-red);
    padding: 10px;
    border-radius: 6px;
}

button {
    padding: 10px 20px;
    border-radius: 6px;
    border: none;
    cursor: pointer;
    font-weight: bold;
    margin-right: 10px;
}

.calculate-btn {
    background: var(--green);
    color: white;
}

.reset-btn {
    background: var(--primary-red);
    color: white;
}
</style>
</head>

<body>

<div class="container">
<h1>Incentive Calculator for FLS (ABCL RSB)</h1>

<div class="card">
<h2>Input Details</h2>

<div class="row">
<div>
<label>Amount Disbursed This Month (₹)</label>
<input type="number" id="disbursed" min="0">
</div>

<div>
<label>Target Assigned For The Month (₹)</label>
<input type="number" id="target" min="0">
</div>

<div>
<label>Number of Fresh Files Disbursed</label>
<input type="number" id="freshFiles" min="0" step="1">
</div>

<div>
<label>NPA in 0–6 MOB</label>
<input type="number" id="npa" min="0" step="1">
</div>

<div>
<label>Average Yield (%)</label>
<input type="number" id="yield" min="0" step="0.01">
</div>
</div>

<div class="error" id="errorMsg"></div>

<button class="calculate-btn" onclick="calculateTotal()">Calculate</button>
<button class="reset-btn" onclick="resetForm()">Reset</button>
</div>

<div class="card">
<h2>Incentive Results</h2>

<div class="result-item">Achievement: <span id="achievement"></span></div>
<div class="result-item">Base Incentive: <span id="base"></span></div>
<div class="result-item">Additional Incentive: <span id="additional"></span></div>
<div class="result-item">Negative Incentive: <span id="negative"></span></div>
<div class="total">Final Total Incentive: <span id="total"></span></div>

<div id="noIncentiveMsg"></div>

</div>
</div>

<script>

function formatCurrency(num) {
    return "₹" + Number(num).toLocaleString("en-IN", { minimumFractionDigits: 2, maximumFractionDigits: 2 });
}

function calculateAchievement(disbursed, target) {
    return disbursed / target;
}

function calculateBase(disbursed, achievement, freshFiles) {
    if (achievement < 0.75 || freshFiles === 0) return 0;

    let multiplier = 0;

    if (achievement >= 0.75 && achievement < 1.0) {
        if (freshFiles === 1) multiplier = 0.002;
        else if (freshFiles === 2) multiplier = 0.003;
        else if (freshFiles === 3) multiplier = 0.004;
        else if (freshFiles >= 4 && freshFiles <= 5) multiplier = 0.005;
        else if (freshFiles >= 6 && freshFiles <= 7) multiplier = 0.006;
        else if (freshFiles >= 8) multiplier = 0.007;
    }

    if (achievement >= 1.0) {
        if (freshFiles === 1) multiplier = 0.003;
        else if (freshFiles === 2) multiplier = 0.004;
        else if (freshFiles === 3) multiplier = 0.005;
        else if (freshFiles >= 4 && freshFiles <= 5) multiplier = 0.006;
        else if (freshFiles >= 6 && freshFiles <= 7) multiplier = 0.007;
        else if (freshFiles >= 8) multiplier = 0.008;
    }

    return disbursed * multiplier;
}

function calculateYieldBonus(base, yieldPercent) {
    if (yieldPercent >= 14 && yieldPercent <= 15) return base * 0.10;
    if (yieldPercent > 15 && yieldPercent <= 16) return base * 0.15;
    if (yieldPercent > 16) return base * 0.20;
    return 0;
}

function calculateNegative(base, npa) {
    if (npa === 1) return base * 0.05;
    if (npa > 1) return base * 0.10;
    return 0;
}

function calculateTotal() {

    const disbursed = parseFloat(document.getElementById("disbursed").value);
    const target = parseFloat(document.getElementById("target").value);
    const freshFiles = parseInt(document.getElementById("freshFiles").value);
    const npa = parseInt(document.getElementById("npa").value);
    const yieldPercent = parseFloat(document.getElementById("yield").value);

    const errorMsg = document.getElementById("errorMsg");
    const noMsg = document.getElementById("noIncentiveMsg");

    errorMsg.textContent = "";
    noMsg.textContent = "";

    if (!disbursed || !target || isNaN(freshFiles) || isNaN(npa) || isNaN(yieldPercent)) {
        errorMsg.textContent = "All fields are required.";
        return;
    }

    if (target <= 0) {
        errorMsg.textContent = "Target must be greater than zero.";
        return;
    }

    if (disbursed < 0 || freshFiles < 0 || npa < 0 || yieldPercent < 0) {
        errorMsg.textContent = "Negative values are not allowed.";
        return;
    }

    const achievement = calculateAchievement(disbursed, target);
    const achievementPercent = (achievement * 100).toFixed(2);

    let achievementClass = "success-red";
    if (achievement >= 1) achievementClass = "success-green";
    else if (achievement >= 0.75) achievementClass = "success-orange";

    document.getElementById("achievement").innerHTML =
        `<span class="${achievementClass}">${achievementPercent}%</span>`;

    if (achievement < 0.75) {
        noMsg.innerHTML = `<span class="success-red">Sorry, no incentive earned this month.</span>`;
        document.getElementById("base").textContent = "₹0.00";
        document.getElementById("additional").textContent = "₹0.00";
        document.getElementById("negative").textContent = "₹0.00";
        document.getElementById("total").textContent = "₹0.00";
        return;
    }

    const base = calculateBase(disbursed, achievement, freshFiles);
    const additional = calculateYieldBonus(base, yieldPercent);
    const negative = calculateNegative(base, npa);

    let total = base + additional - negative;
    if (total < 0) total = 0;

    document.getElementById("base").textContent = formatCurrency(base.toFixed(2));
    document.getElementById("additional").textContent = formatCurrency(additional.toFixed(2));
    document.getElementById("negative").textContent = formatCurrency(negative.toFixed(2));
    document.getElementById("total").textContent = formatCurrency(total.toFixed(2));
}

function resetForm() {
    document.querySelectorAll("input").forEach(i => i.value = "");
    document.getElementById("errorMsg").textContent = "";
    document.getElementById("noIncentiveMsg").textContent = "";
    document.getElementById("achievement").textContent = "";
    document.getElementById("base").textContent = "";
    document.getElementById("additional").textContent = "";
    document.getElementById("negative").textContent = "";
    document.getElementById("total").textContent = "";
}

</script>

</body>
</html>
